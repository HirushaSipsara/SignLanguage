<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP Tilt Sensor Audio Feedback</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }
        h1 {
            color: #333;
        }
        .direction {
            font-size: 2em;
            margin-top: 20px;
        }
    </style>
    <script>
        // JavaScript code to fetch tilt direction from ESP8266/ESP32
        document.addEventListener('DOMContentLoaded', function() {
        // Replace <ESP_IP_ADDRESS> with the actual IP address of your ESP8266/ESP32
        const espIpAddress = "http://192.168.1.110"; // Example: http://192.168.1.100

        function fetchDirection() {
            fetch(espIpAddress)
                .then(response => response.text())
                .then(direction => {
                    updateDirection(direction.trim());  // Update the web page with the fetched direction
                })
                .catch(error => console.error('Error fetching direction:', error));  // Log any errors
        }

        // Call fetchDirection function every 2 seconds to get real-time updates
        setInterval(fetchDirection, 2000);

        // Function to update direction text and play audio
        function updateDirection(direction) {
            document.getElementById('direction-display').innerText = direction; // Update the direction text
            playAudio(direction);  // Play the corresponding audio
        }

        // Function to play audio based on direction
        function playAudio(direction) {
            const audioFiles = {
                "Tilt Right": "https://hirushasipsara.github.io/SignLanguage/Tilt%20Right.mp3",
                "Tilt Left": "https://hirushasipsara.github.io/SignLanguage/Tilt%20Left.mp3",
                "Tilt Forward": "https://hirushasipsara.github.io/SignLanguage/Tilt%20Forward.mp3",
                "Tilt Backward": "https://hirushasipsara.github.io/SignLanguage/Tilt%20Backward.mp3",
                "Flat": "https://hirushasipsara.github.io/SignLanguage/Flat.mp3",
                "Upside Down": "https://hirushasipsara.github.io/SignLanguage/Upside%20Down.mp3",
                "Neutral": "https://hirushasipsara.github.io/SignLanguage/Neutral.mp3"
            };
            
            if (audioFiles[direction]) {
                const audio = new Audio(audioFiles[direction]);
                audio.play();
            }
        }
    });

    </script>
</head>
<body>
    <h1>MPU6050 Tilt Direction</h1>
    <p class="direction" id="direction-display">Neutral</p>

    <!-- Button to Simulate Direction Change (for testing only) -->
    <button onclick="simulateDirectionChange()">Simulate Direction Change</button>

    <script>
        // This function can be replaced with real-time updates from the ESP8266/ESP32 server
        // Make an AJAX call to the ESP server and get the current direction, then call updateDirection()
    </script>
</body>
</html>
